---
import Layout from './Content.astro';
import PostHeader from '../components/blog/PostHeader.astro';
import ProseBlock from '../components/blocks/ProseBlock.astro';
import Outro from '../components/blog/Outro.astro';
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';

export interface Props {
	content: {
		title: string;
		description: string;
		authors: string[];
		publishDate: string | Date;
		socialImage: string;
		coverImage?: string;
		coverImageAlt?: string;
		heroImage?: string;
		heroImageAlt?: string;
	}
}

const { content: { title, publishDate, description, authors, socialImage, coverImage, heroImage, coverImageAlt, heroImageAlt } } = Astro.props as Props;
const { canonicalURL } = Astro;
const meta = {
	title,
	description,
	canonicalURL,
	image: socialImage,
}

const cover = (coverImage || heroImage) && { src: coverImage ?? heroImage, alt: coverImageAlt ?? heroImageAlt ?? title}
---

<Layout meta={meta}>
    <Nav slot="nav" />

    <ProseBlock>
		<PostHeader title={title} authors={authors} publishDate={publishDate} {cover} />

		<article>
			<slot />
		</article>

		<Outro tweet={{ title, href: Astro.canonicalURL.toString() }} />
	</ProseBlock>

    <Footer slot="footer" />
</Layout>

<style>
	article :global(h2) {
		@apply text-lg lg:text-xl;
	}

	article :global(h3, h4) {
		@apply text-lg;
	}

	article .not-prose {
		@apply sm:ml-0 sm:mr-0;
	}
</style>