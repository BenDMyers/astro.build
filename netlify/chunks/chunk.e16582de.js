var m=(e,t,r)=>{e.setAttribute(t,new URL(e.getAttribute(t),r).pathname)};function v(e,t){e.querySelectorAll('[href^="./"], [href^="../"]').forEach(r=>m(r,"href",t)),e.querySelectorAll('[src^="./"], [src^="../"]').forEach(r=>m(r,"src",t))}var h=e=>(t,r)=>t[`node${e}`]===r[`node${e}`],T=h("Name"),L=h("Type"),N=h("Value");function b(e,t){if(e.attributes.length===0&&t.attributes.length===0)return[];let r=[],n=new Map,a=new Map;for(let o of e.attributes)n.set(o.name,o.value);for(let o of t.attributes){let i=n.get(o.name);o.value===i?n.delete(o.name):(typeof i<"u"&&n.delete(o.name),a.set(o.name,o.value))}for(let o of n.keys())r.push({type:5,name:o});for(let[o,i]of a.entries())r.push({type:4,name:o,value:i});return r}function d(e,t=!0){let r=`${e.localName}`;for(let{name:n,value:a}of e.attributes)t&&n.startsWith("data-")||(r+=`[${n}=${a}]`);return r+=e.innerHTML,r}function c(e){switch(e.tagName){case"BASE":case"TITLE":return e.localName;case"META":{if(e.hasAttribute("name"))return`meta[name="${e.getAttribute("name")}"]`;if(e.hasAttribute("property"))return`meta[name="${e.getAttribute("property")}"]`;break}case"LINK":{if(e.hasAttribute("rel")&&e.hasAttribute("href"))return`link[rel="${e.getAttribute("rel")}"][href="${e.getAttribute("href")}"]`;if(e.hasAttribute("href"))return`link[href="${e.getAttribute("href")}"]`;break}}return d(e)}function $(e){let[t,r=""]=e.split("?"),n=new URLSearchParams(r);return n.set("t",`${Date.now()}`),`${t}?${n}`}function s(e){if(e.nodeType===1&&e.hasAttribute("data-persist"))return e;if(e.nodeType===1&&e.localName==="script"){let t=document.createElement("script");for(let{name:r,value:n}of e.attributes)r==="src"&&(n=$(n)),t.setAttribute(r,n);return t.innerHTML=e.innerHTML,t}return e.cloneNode(!0)}function E(e,t){if(e.children.length===0&&t.children.length===0)return[];let r=[],n=new Map,a=new Map,o=new Map;for(let i of e.children)n.set(c(i),i);for(let i of t.children){let l=c(i),u=n.get(l);u?d(i,!1)!==d(u,!1)&&a.set(l,s(i)):o.set(l,s(i)),n.delete(l)}for(let i of e.childNodes){if(i.nodeType===1){let l=c(i);if(n.has(l)){r.push({type:1});continue}else if(a.has(l)){let u=a.get(l);r.push({type:3,attributes:b(i,u),children:g(i,u)});continue}}r.push(void 0)}for(let i of o.values())r.push({type:0,node:s(i)});return r}function g(e,t){let r=[],n=Math.max(e.childNodes.length,t.childNodes.length);for(let a=0;a<n;a++){let o=e.childNodes.item(a),i=t.childNodes.item(a);r[a]=p(o,i)}return r}function p(e,t){if(!e)return{type:0,node:s(t)};if(!t)return{type:1};if(L(e,t)){if(e.nodeType===3){let r=e.nodeValue,n=t.nodeValue;if(r.trim().length===0&&n.trim().length===0)return}if(e.nodeType===1){if(T(e,t)){let r=e.tagName==="HEAD"?E:g;return{type:3,attributes:b(e,t),children:r(e,t)}}return{type:2,node:s(t)}}else return e.nodeType===9?p(e.documentElement,t.documentElement):N(e,t)?void 0:{type:2,value:t.nodeValue}}return{type:2,node:s(t)}}function M(e,t){if(t.length!==0)for(let{type:r,name:n,value:a}of t)r===5?e.removeAttribute(n):r===4&&e.setAttribute(n,a)}async function A(e,t,r){if(!t)return;let n;switch(e.nodeType===9?(e=e.documentElement,n=e):r?n=r:n=e,t.type){case 0:{let{node:a}=t;e.appendChild(a);return}case 1:{if(!n)return;e.removeChild(n);return}case 2:{if(!n)return;let{node:a,value:o}=t;if(typeof o=="string"){n.nodeValue=o;return}n.replaceWith(a);return}case 3:{if(!n)return;let{attributes:a,children:o}=t;M(n,a);let i=Array.from(n.childNodes);await Promise.all(o.map((l,u)=>A(n,l,i[u])));return}}}function S(e,t){let r=p(e,t);return A(e,r)}var D=e=>e.nodeType===1,k=e=>{try{let t=new URL(e);if(window.location.origin===t.origin)return t.pathname===window.location.pathname?!t.hash:!0}catch{}return!1},R=({target:e},t)=>{if(!D(e))return;let r=e.closest("a");if(!r||typeof t.include=="string"&&!r.matches(t.include)||typeof t.include=="function"&&!t.include(r))return;let{href:n}=r;if(k(n))return new URL(n)},y=()=>{},f;async function w(e,t=!1,r){let{beforeDiff:n=y,afterDiff:a=y}=r;f=f||new DOMParser;let o=await fetch(`${e}`).then(u=>u.text()).catch(()=>{window.location.assign(e)});if(!o)return;t||(history.pushState({},"",e),(r.scrollToTop??!0)&&window.scrollTo({top:0}));let i=f.parseFromString(o,"text/html");v(i,e),n(i);let l=i.querySelector("title");l&&(document.title=l.text),await S(document,i),a()}function V(e={}){typeof window<"u"&&(window.addEventListener("click",async t=>{let r=R(t,e);if(r){t.preventDefault();try{w(r,!1,e)}catch{window.location.assign(r)}}}),window.addEventListener("popstate",()=>{if(!window.location.hash)try{w(new URL(window.location.toString()),!0,e)}catch{window.location.reload()}}))}V({include:"a.pill",scrollToTop:!1,beforeDiff:e=>{e.body.classList.add(...document.body.classList)}});
